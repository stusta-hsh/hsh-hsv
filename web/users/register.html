<!DOCTYPE html>
<html>

<head>
	<link href="../res/css/screen.css" rel="stylesheet" type="text/css" media="all">
	<script src="../res/lib/jquery-3.5.1.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Register Users</title>
</head>

<body>
	<div class='card auth-invisible' id='c_pendingRequests'>
		<p class='title'>Pending User Requests</p>
		
		<table>
			<thead>
				<th>Date</th>
				<th>Name</th>
				<th>Room</th>
			</thead>
			<tbody id='t_pendingRequests'/>
		</table>
	</div>
	<div class='card'>
		<p class='title'>User Roles</p>
		
		<table>
			<thead>
				<th>Role</th>
				<th>Name</th>
				<th>Date</th>
			</thead>
			<tbody id='t_roles'/>
		</table>
	</div>
<script>

$.ajax("../api/user/register", {
	type: "GET",
	error: function(xhr, status, text) {
		if (xhr.status != 401 && xhr.status != 403) {
			alert(xhr.status + text + ": " + xhr.responseText);
		}
	},
	success: function(result, status, xhr) {
		$.each(result, function(i, item) {
			$('<tr>').append(
				$('<td>').text(item.date),
				$('<td>').text(item.name),
				$('<td>').text(item.room)
			).appendTo('#t_pendingRequests');
		});
		$("#c_pendingRequests").removeClass("auth-invisible");
	}
});

</script>
</body>
</html>